<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Lost and Found System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 1000px;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .login-form, .form-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        label {
            font-weight: 600;
            color: #333;
        }

        input, textarea, select {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background: #764ba2;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .button-group button {
            flex: 1;
            min-width: 150px;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .nav-buttons button {
            flex: 1;
            min-width: 120px;
        }

        .logout-btn {
            background: #e74c3c;
        }

        .logout-btn:hover {
            background: #c0392b;
        }

        .delete-btn {
            background: #e74c3c;
            padding: 8px 16px;
            font-size: 0.9em;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .claim-btn {
            background: #27ae60;
            padding: 8px 16px;
            font-size: 0.9em;
        }

        .claim-btn:hover {
            background: #229954;
        }

        .item-card {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .item-card:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }

        .item-card.claimed {
            background: #fff3cd;
            border-color: #ffc107;
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .item-name {
            font-size: 1.3em;
            font-weight: 700;
            color: #333;
        }

        .claimed-badge {
            background: #ffc107;
            color: #333;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .item-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .detail {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .detail-label {
            font-weight: 600;
            color: #667eea;
            font-size: 0.9em;
        }

        .detail-value {
            color: #555;
        }

        .item-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
        }

        .no-items {
            text-align: center;
            padding: 40px 20px;
            color: #999;
            font-size: 1.1em;
        }

        .user-info {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .user-info strong {
            color: #667eea;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .item-details {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }

            .button-group button {
                width: 100%;
            }

            .nav-buttons {
                flex-direction: column;
            }

            .nav-buttons button {
                width: 100%;
            }

            .item-actions {
                flex-direction: column;
            }

            .item-actions button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Find It ðŸ”Ž</h1>
            <p>Find your lost items or report found items</p>
        </div>
        <div class="content" id="content"></div>
    </div>

    <script>
        let items = [];
        let currentUser = null;
        let currentRole = null;
        let currentView = 'catalog';

        // Initialize app
        function init() {
            loadItemsFromStorage();
            showLoginPage();
        }

        // Load items from localStorage
        function loadItemsFromStorage() {
            const stored = localStorage.getItem('lostFoundItems');
            items = stored ? JSON.parse(stored) : [
                { id: 1, name: 'Blue Backpack', description: 'Navy blue backpack with laptop compartment', location: 'Library', dateFound: '2024-01-15', claimed: false },
                { id: 2, name: 'Red Water Bottle', description: 'Stainless steel water bottle', location: 'Gym', dateFound: '2024-01-14', claimed: true, claimedBy: 'John Smith', claimDate: '2024-01-16' },
                { id: 3, name: 'Black Umbrella', description: 'Compact black umbrella', location: 'Main Entrance', dateFound: '2024-01-13', claimed: false },
                { id: 4, name: 'Silver Watch', description: 'Digital watch with blue band', location: 'Cafeteria', dateFound: '2024-01-12', claimed: false }
            ];
        }

        // Save items to localStorage
        function saveItemsToStorage() {
            localStorage.setItem('lostFoundItems', JSON.stringify(items));
        }

        // Show login page
        function showLoginPage() {
            const content = document.getElementById('content');
            content.innerHTML = `
                <div class="login-form">
                    <h2>Login</h2>
                    <div class="form-group">
                        <label>Username:</label>
                        <input type="text" id="username" placeholder="Enter username">
                    </div>
                    <div class="form-group">
                        <label>Password:</label>
                        <input type="password" id="password" placeholder="Enter password">
                    </div>
                    <button onclick="handleLogin()">Login</button>
                    <div style="margin-top: 20px; padding: 15px; background: #f0f0f0; border-radius: 5px;">
                        <p><strong>Demo Credentials:</strong></p>
                        <p>Admin: admin / password</p>
                        <p>Student: student / student123</p>
                    </div>
                </div>
            `;
        }

        // Handle login
        function handleLogin() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (!username || !password) {
                alert('Please enter both username and password');
                return;
            }

            // Validate credentials
            const credentials = {
                'admin': { password: 'password', role: 'admin' },
                //'staff': { password: 'staff123', role: 'staff' },
                'student': { password: 'student123', role: 'student' }
            };

            if (credentials[username] && credentials[username].password === password) {
                currentUser = username;
                currentRole = credentials[username].role;
                showDashboard();
            } else {
                alert('Invalid credentials');
            }
        }

        // Show dashboard
        function showDashboard() {
            const content = document.getElementById('content');
            let navButtons = `
                <div class="user-info">
                    <div><strong>Logged in as:</strong> ${currentUser} (${currentRole})</div>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
                <div class="nav-buttons">
            `;

            if (currentRole === 'student') {
                navButtons += `<button onclick="showCatalog()">Search Catalog</button>`;
            } else {
                navButtons += `
                    <button onclick="showCatalog()">Item Catalog</button>
                    <button onclick="showReportForm()">Report Found Item</button>
                    <button onclick="showClaimItems()">Claim Item</button>
                `;
            }

            navButtons += `</div>`;
            content.innerHTML = navButtons;

            // Show default view
            if (currentRole === 'student') {
                showCatalog();
            } else {
                showCatalog();
            }
        }

        // Show catalog
        function showCatalog() {
            currentView = 'catalog';
            const content = document.getElementById('content');
            let html = `
                <div class="user-info">
                    <div><strong>Logged in as:</strong> ${currentUser} (${currentRole})</div>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
                <div class="nav-buttons">
            `;

            if (currentRole === 'student') {
                html += `<button onclick="showCatalog()">Search Catalog</button>`;
            } else {
                html += `
                    <button onclick="showCatalog()">Item Catalog</button>
                    <button onclick="showReportForm()">Report Found Item</button>
                    <button onclick="showClaimItems()">Claim Item</button>
                `;
            }

            html += `</div>`;

            if (currentRole === 'student') {
                html += `
                    <h2>Search for Your Lost Item</h2>
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Search by item name, description, or location..." onkeyup="filterCatalog()">
                    </div>
                `;
            } else {
                html += `
                    <h2>Item Catalog</h2>
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Search by item name, description, or location..." onkeyup="filterCatalog()">
                    </div>
                `;
            }

            html += `<div id="catalogItems"></div>`;
            content.innerHTML = html;
            displayCatalog();
        }

        // Display catalog items
        function displayCatalog() {
            const catalogDiv = document.getElementById('catalogItems');
            if (items.length === 0) {
                catalogDiv.innerHTML = '<div class="no-items">No items in catalog</div>';
                return;
            }

            let html = '';
            items.forEach(item => {
                html += `
                    <div class="item-card ${item.claimed ? 'claimed' : ''}">
                        <div class="item-header">
                            <div class="item-name">${item.name}</div>
                            ${item.claimed ? '<div class="claimed-badge">âœ“ Claimed</div>' : ''}
                        </div>
                        <div class="item-details">
                            <div class="detail">
                                <div class="detail-label">Description</div>
                                <div class="detail-value">${item.description}</div>
                            </div>
                            <div class="detail">
                                <div class="detail-label">Location Found</div>
                                <div class="detail-value">${item.location}</div>
                            </div>
                            <div class="detail">
                                <div class="detail-label">Date Found</div>
                                <div class="detail-value">${item.dateFound}</div>
                            </div>
                            ${item.claimed ? `
                                <div class="detail">
                                    <div class="detail-label">Claimed By</div>
                                    <div class="detail-value">${item.claimedBy}</div>
                                </div>
                                <div class="detail">
                                    <div class="detail-label">Claim Date</div>
                                    <div class="detail-value">${item.claimDate}</div>
                                </div>
                            ` : ''}
                        </div>
                        <div class="item-actions">
                            ${currentRole !== 'student' ? `<button class="delete-btn" onclick="deleteItem(${item.id})">Delete Item</button>` : ''}
                        </div>
                    </div>
                `;
            });

            catalogDiv.innerHTML = html;
        }

        // Filter catalog
        function filterCatalog() {
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            const catalogDiv = document.getElementById('catalogItems');

            if (searchInput === '') {
                displayCatalog();
                return;
            }

            const filtered = items.filter(item =>
                item.name.toLowerCase().includes(searchInput) ||
                item.description.toLowerCase().includes(searchInput) ||
                item.location.toLowerCase().includes(searchInput)
            );

            if (filtered.length === 0) {
                catalogDiv.innerHTML = '<div class="no-items">No items found matching your search</div>';
                return;
            }

            let html = '';
            filtered.forEach(item => {
                html += `
                    <div class="item-card ${item.claimed ? 'claimed' : ''}">
                        <div class="item-header">
                            <div class="item-name">${item.name}</div>
                            ${item.claimed ? '<div class="claimed-badge">âœ“ Claimed</div>' : ''}
                        </div>
                        <div class="item-details">
                            <div class="detail">
                                <div class="detail-label">Description</div>
                                <div class="detail-value">${item.description}</div>
                            </div>
                            <div class="detail">
                                <div class="detail-label">Location Found</div>
                                <div class="detail-value">${item.location}</div>
                            </div>
                            <div class="detail">
                                <div class="detail-label">Date Found</div>
                                <div class="detail-value">${item.dateFound}</div>
                            </div>
                            ${item.claimed ? `
                                <div class="detail">
                                    <div class="detail-label">Claimed By</div>
                                    <div class="detail-value">${item.claimedBy}</div>
                                </div>
                                <div class="detail">
                                    <div class="detail-label">Claim Date</div>
                                    <div class="detail-value">${item.claimDate}</div>
                                </div>
                            ` : ''}
                        </div>
                        <div class="item-actions">
                            ${currentRole !== 'student' ? `<button class="delete-btn" onclick="deleteItem(${item.id})">Delete Item</button>` : ''}
                        </div>
                    </div>
                `;
            });

            catalogDiv.innerHTML = html;
        }

        function deleteItem(itemId) {
            const item = items.find(i => i.id === itemId);
            let confirmMessage = 'Are you sure you want to delete this item?';
            
            if (item && item.claimed) {
                confirmMessage = `This item is claimed by ${item.claimedBy}. Are you sure you want to delete it?`;
            }
            
            if (confirm(confirmMessage)) {
                items = items.filter(item => item.id !== itemId);
                saveItemsToStorage();
                displayCatalog();
                if (currentView === 'claim') {
                    displayClaimItems();
                }
                alert('Item deleted successfully!');
            }
        }

        // Show report form
        function showReportForm() {
            currentView = 'report';
            const content = document.getElementById('content');
            content.innerHTML = `
                <div class="user-info">
                    <div><strong>Logged in as:</strong> ${currentUser} (${currentRole})</div>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
                <div class="nav-buttons">
                    <button onclick="showCatalog()">Item Catalog</button>
                    <button onclick="showReportForm()">Report Found Item</button>
                    <button onclick="showClaimItems()">Claim Item</button>
                </div>
                <h2>Report a Found Item</h2>
                <form class="form-section" onsubmit="handleReportItem(event)">
                    <div class="form-group">
                        <label>Item Name:</label>
                        <input type="text" id="itemName" required>
                    </div>
                    <div class="form-group">
                        <label>Description:</label>
                        <textarea id="itemDescription" rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Location Found:</label>
                        <input type="text" id="itemLocation" required>
                    </div>
                    <div class="form-group">
                        <label>Date Found:</label>
                        <input type="date" id="itemDate" required>
                    </div>
                    <div class="form-group">
                        <label>Your Name:</label>
                        <input type="text" id="reporterName" required>
                    </div>
                    <button type="submit">Report Item</button>
                </form>
            `;
        }

        // Handle report item
        function handleReportItem(event) {
            event.preventDefault();

            const newItem = {
                id: Math.max(...items.map(i => i.id), 0) + 1,
                name: document.getElementById('itemName').value,
                description: document.getElementById('itemDescription').value,
                location: document.getElementById('itemLocation').value,
                dateFound: document.getElementById('itemDate').value,
                claimed: false
            };

            items.push(newItem);
            saveItemsToStorage();
            alert('Item reported successfully!');
            showCatalog();
        }

        // Show claim items
        function showClaimItems() {
            currentView = 'claim';
            const content = document.getElementById('content');
            content.innerHTML = `
                <div class="user-info">
                    <div><strong>Logged in as:</strong> ${currentUser} (${currentRole})</div>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
                <div class="nav-buttons">
                    <button onclick="showCatalog()">Item Catalog</button>
                    <button onclick="showReportForm()">Report Found Item</button>
                    <button onclick="showClaimItems()">Claim Item</button>
                </div>
                <h2>Claim a Found Item</h2>
                <div id="claimItems"></div>
            `;
            displayClaimItems();
        }

        // Display claim items
        function displayClaimItems() {
            const claimDiv = document.getElementById('claimItems');
            const unclaimedItems = items.filter(item => !item.claimed);

            if (unclaimedItems.length === 0) {
                claimDiv.innerHTML = '<div class="no-items">No unclaimed items available</div>';
                return;
            }

            let html = '';
            unclaimedItems.forEach(item => {
                html += `
                    <div class="item-card">
                        <div class="item-header">
                            <div class="item-name">${item.name}</div>
                        </div>
                        <div class="item-details">
                            <div class="detail">
                                <div class="detail-label">Description</div>
                                <div class="detail-value">${item.description}</div>
                            </div>
                            <div class="detail">
                                <div class="detail-label">Location Found</div>
                                <div class="detail-value">${item.location}</div>
                            </div>
                            <div class="detail">
                                <div class="detail-label">Date Found</div>
                                <div class="detail-value">${item.dateFound}</div>
                            </div>
                        </div>
                        <div class="item-actions">
                            <button class="claim-btn" onclick="openClaimForm(${item.id})">Claim This Item</button>
                        </div>
                    </div>
                `;
            });

            claimDiv.innerHTML = html;
        }

        // Open claim form
        function openClaimForm(itemId) {
            const claimantName = prompt('Enter your name:');
            if (!claimantName) return;

            const claimDate = prompt('Enter claim date (YYYY-MM-DD):', new Date().toISOString().split('T')[0]);
            if (!claimDate) return;

            const item = items.find(i => i.id === itemId);
            if (item) {
                item.claimed = true;
                item.claimedBy = claimantName;
                item.claimDate = claimDate;
                saveItemsToStorage();
                displayClaimItems();
                alert('Item claimed successfully!');
            }
        }

        // Logout
        function logout() {
            currentUser = null;
            currentRole = null;
            showLoginPage();
        }

        // Start app
        init();
    </script>
</body>
</html>
